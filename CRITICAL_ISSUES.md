# æ‰¹é‡å¤„ç†ç»„ä»¶ - å…³é”®é—®é¢˜ä¿®å¤è®¡åˆ’

## å‘ç°çš„é—®é¢˜

### âŒ ä¸¥é‡é—®é¢˜ï¼ˆå¿…é¡»ä¿®å¤ï¼‰

1. **æ•°æ®ç»“æ„ä¸ä¸€è‡´**
   - `results` ä»ç„¶æ˜¯æ•°ç»„ï¼Œä½†éœ€è¦æ”¹ä¸ºå¯¹è±¡ `{imageId: result}`
   - å¯¼è‡´åç»­æ‰€æœ‰ä¾èµ– results çš„ä»£ç éƒ½ä¼šå‡ºé”™

2. **ç¼ºå°‘é˜Ÿåˆ—å¤„ç†ç³»ç»Ÿ**
   - å½“å‰ä»æ˜¯æ‰¹é‡å‘é€åˆ°åç«¯ API
   - éœ€è¦æ”¹ä¸ºé€ä¸ªå¤„ç†çš„é˜Ÿåˆ—ç³»ç»Ÿ
   - æ·»åŠ  `processing` çŠ¶æ€æ˜¾ç¤º

3. **ç¼ºå°‘æˆªå›¾ä¸‹è½½åŠŸèƒ½**
   - å·²æ·»åŠ  `html2canvas` import å’Œ `markdownRefs`
   - ä½†æœªå®ç° `handleDownloadSingleHTML` å‡½æ•°
   - æœªåœ¨ UI ä¸­æ·»åŠ "ğŸ–¼ï¸ æˆªå›¾"æŒ‰é’®

4. **çŠ¶æ€å¾½ç« ä¸å®Œæ•´**
   - ç¼ºå°‘ `processing` çŠ¶æ€çš„æ˜¾ç¤º
   - å½“å‰åªæœ‰ `pending`, `success`, `error`

### âš ï¸ éœ€è¦æ”¹è¿›

5. **è¿›åº¦è®¡æ•°é€»è¾‘**
   ```javascript
   const successCount = results.filter(r => r.success).length;  // âŒ æ•°ç»„æ–¹æ³•
   ```
   åº”è¯¥æ”¹ä¸ºï¼š
   ```javascript
   const successCount = Object.values(results).filter(r => r.success).length;
   ```

6. **ä¸‹è½½å…¨éƒ¨é€»è¾‘**
   ```javascript
   results.forEach((result, index) => {  // âŒ æ•°ç»„æ–¹æ³•
   ```
   åº”è¯¥æ”¹ä¸ºï¼š
   ```javascript
   Object.values(results).forEach((result) => {
   ```

7. **ç»“æœæ˜¾ç¤ºé€»è¾‘**
   ```javascript
   {results.map((result, index) => (  // âŒ æ•°ç»„æ–¹æ³•
   ```
   åº”è¯¥æ”¹ä¸ºï¼š
   ```javascript
   {images.map((image) => {
     const result = results[image.id];
     if (!result) return null;
     return (...)
   })}
   ```

## ä¿®å¤æ–¹æ¡ˆ

### æ­¥éª¤ 1: ä¿®å¤æ•°æ®ç»“æ„å’ŒåŸºç¡€é€»è¾‘
- âœ… æ›´æ–° `results` åˆå§‹å€¼ä¸º `{}`
- âœ… æ›´æ–° `setResults({})`
- â¬œ ä¿®å¤ `handleRemoveImage` æ¸…ç†é€»è¾‘
- â¬œ ä¿®å¤ `successCount` / `failCount` è®¡ç®—

### æ­¥éª¤ 2: å®ç°é˜Ÿåˆ—å¤„ç†ç³»ç»Ÿ
- â¬œ åˆ›å»º `processImage` å•ä¸ªå¤„ç†å‡½æ•°
- â¬œ åˆ›å»º `handleProcessAll` é˜Ÿåˆ—å¤„ç†å‡½æ•°
- â¬œ æ·»åŠ  `currentProcessing` çŠ¶æ€è·Ÿè¸ª

### æ­¥éª¤ 3: æ·»åŠ æˆªå›¾ä¸‹è½½åŠŸèƒ½
- â¬œ å®ç° `handleDownloadSingleHTML` å‡½æ•°
- â¬œ åœ¨ç»“æœé¡¹ä¸­æ·»åŠ "ğŸ–¼ï¸ æˆªå›¾"æŒ‰é’®
- â¬œ ç»Ÿä¸€æŒ‰é’®æ–‡å­—ä¸º `ğŸ“„ MD` å’Œ `ğŸ–¼ï¸ æˆªå›¾`

### æ­¥éª¤ 4: æ›´æ–°çŠ¶æ€æ˜¾ç¤º
- â¬œ æ·»åŠ  `processing` çŠ¶æ€åˆ° status-badge
- â¬œ æ˜¾ç¤ºè¿›åº¦è®¡æ•°å™¨ï¼ˆå·²å®Œæˆ/æ€»æ•°ï¼‰
- â¬œ å½“å‰å¤„ç†å›¾ç‰‡é«˜äº®

### æ­¥éª¤ 5: ä¼˜åŒ–ç”¨æˆ·ä½“éªŒ
- â¬œ æ·»åŠ å–æ¶ˆ/æš‚åœæŒ‰é’®
- â¬œ ä¼˜åŒ–å¤§é‡å›¾ç‰‡æ—¶çš„æ€§èƒ½
- â¬œ æ·»åŠ é”™è¯¯é‡è¯•æœºåˆ¶

## å½“å‰çŠ¶æ€

- âœ… å·²æ·»åŠ  `html2canvas` import
- âœ… å·²æ·»åŠ  `markdownRefs` ref
- âœ… å·²å°† `results` æ”¹ä¸ºå¯¹è±¡ç»“æ„
- â¬œ å…¶ä»–åŠŸèƒ½å¾…å®ç°
